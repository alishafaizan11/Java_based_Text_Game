import java.util.ArrayList;
import java.util.Random;

public class ProfessorFightSceneLocation extends Location implements Runnable{

	public UI ui;
	public String des;
	public Player currentPlayer;
	public String winner;
	public Villain professor;//make professor instae
	boolean fightScene = true;
	
	private static ProfessorFightSceneLocation instance;
	
	public void startFightScene(){
		Thread t = new Thread(this);
		t.start();
	}
	
	private ProfessorFightSceneLocation(UI ui) {
		{
			this.ui= ui;
			fightScene = true;
			currentPlayer = Player.getInstance(null, ui);
			professor = Professor.getInstance(ui);
			this.startFightScene();
		}
	}

	public void run(){
		ui.setDisableUI();
		//print professors dialogue
		//while loop when :
		//thread sleep then output 
		
		ui.print("You exit the Mayor's Office. You see a familiar figure.\n"
				+"You grab his shoulder and watch in horror as he turns around and...\n"
				+ "ITS THE PROFESSOR!!!");
		ui.print("##%%%%%%#%%%%%%%%%%%%%%%%%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%%%%%%####\n"
				+ "#####%##%#######%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#######\n"
				+ "################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%###########\n"
				+ "################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%%%########\n"
				+ "#################%%%%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#########\n"
				+ "###################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%(,   ..  . ....,,**//(((#######%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%########\n"
				+ "################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#,          .          .,* *#%%%%%%%%%%%%%%%%%%%%%%%%%%############\n"
				+ "#######################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%( ##(,      .,(####/%&% ##%%%%%%%%%%%%%%%%%%%%%%%%%%############\n"
				+ "################%####%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%/ * ./##############&&# %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%########\n"
				+ "#####################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*,%**/((#(.,,,,,###&&&*.##%%%%%%%%%%%%%%%%%%%%%%%%##%%%#########\n"
				+ "###################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%.,%########(*/####(&&&/*.#%%%%%%%%%%%%%%%%%%%%%%#%%%#%%#########\n"
				+ "####################%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%./%###/(/#########/&&&(//(##%%%%%%%%%%%%%%%%%%%%%%%#############\n"
				+ "#####################%%%%%%%%%%%%%%%%%%%%%%%%#( .,(%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%.(%(/%/%#%%(/(/###*&&&%(*/%%%%%%%%%%%%%%%%%%%%%#################\n"
				+ "#####################%%%%%%%%%%%%%%%%%%%%%%#%. #(&#*. ..,(%%%%%%%%%%%%%%%%%%%%%%%%%%%#./(%#%%%(##/##%(/#(&&%%%.(%%%%%%%%%%%%%%%%%%%%%#####%%##########\n"
				+ "#####################%%%%%%%%%%%%%%%%%%%%##* *&&&#&&&&&&&%/. . ,(%%%%%%%%%%%%%%%%%%%## #%%#%#%*#%%%%%%#%%&&% (#%%%%%%%%%%%%%%%%#%#######%%############\n"
				+ "#####################%%%%%%%%%%%%%%%%%%%##..&&&&&&&#&&&&&&&&&&&&......,(%%%%%%%%%%%%#( ####%%%%%%%%%%%##&&%# #%%%%%%%%%%%%%%%%%%%%%%%%%%##############\n"
				+ "######################%%%%%%%%%%%%%%%%#%, /&&&&&&&&&#&&&&&&&&&&&%.&&&&&#*. ..*#%%%%%%/.####%####%%%%%%%(&&&* %%%%%%%%%%%%%%%%%%%%%%%%%%%%#############\n"
				+ "#######################%%%%%%%%%%%%%%%/ .&&&&&&&&&&&&%%&&&&&&&&&&,(&&&&&&&&&&&%*.. .*/,,,......   ...,,,&&&,.%%%%%%%%%%%%%%%%%%%%%%%%%%%%#############\n"
				+ "(#####################%%%%%%%%%%%%###. #&&&&&&&&&&&&&&&(&&&&&&&&&(.&&&&&&&&&&&&&&&&&&#*...&&&&%     %&&&&&&.,#%%%%%%%%%%%%%%%%%%%%%%%%%#%%%%%%%%######\n"
				+ "(((##################%%%%%%%%%%%#%%, ,&&&&&&&&&&&&&&&&&&#&&&&&&&&% &&&&&&&&&&&&&&&&&&&&&&&&&&&%     %&&&&&& /#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#######\n"
				+ "/(((((###############%%%%%%%%%%%#(  %&&&&&&&&&&&&&&&&&&&&&#&&&&&&&.%&&&&&&&&&&&&&&&&&&&&&&&&&&%     /&&&&&& (%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#######\n"
				+ "((#((((((##########%%%%%%%%%%%##. (&&&&&&&&&&&&&&&&&&&&&&&&#&&&&&&.%&&&&/&&&&&&%#((#%&&&&&&&&&%     *&&&&&&#, .,(%%#%%%%%%%%%%%%%%%%%%%%%%%%%#########\n"
				+ "/(#((#(((((########%#%%%%%##%%, .&&&&&&&&&&&&&&&&&&&&&&&&&&&&%&&&% %&&&@%&&&&&&&&&&&&&&&&&&%#(/     .&&&&&&&&&&&#,  ./#%%%%%%%%%%%%%%%%%%%%###########\n"
				+ "//(((##((#(#####%##%%%%#%%%#(  &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&#&&%.&&&&%&&&&&&&&&&&&&&&&&&&&&&&&&&&*/(%&&&&&&&&&&&&&&%*. ./#%%%%%%%%%%%%#####%%#######\n"
				+ "/((((((((#(###%%%%%##%%%##%. #&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%%*,&&&&(&&&&&&&&&&&&&&&&&&&&&&&&&&(&&&&&&&%/%&&&&&&&&&&&&&*,...*#%%%%%%%%%%###########\n"
				+ "/(#((#(((((##########%##%* /&&##&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&./&&&&(&&&&&&&&&&&&&&&&&&&&&&&&&#&&&&&&&&&&&&&#(&&&&&&&&##&&&&%/   *#%%%%#%##########\n"
				+ "((#(((#((#(##########%#( .&&&&&&&#%&&&&&&&&&&&&&&&&&&&&&&&&&&&&#/ #&&&&%&&&&&&&&&&&&&&&&&&&&&&&&#&&&&&&&&&&&&,.%&&&(#&&&%/&&&&&&&&&&&/.  ,(###########\n"
				+ "//#((#(((((#####%%%##%. (&&&&&&&&&&&#%&&&&&&&&&&&&&&&&&%/.  ./#%#.%&&&&&&&&&&&&&&&&&&&&&&&&&&&&%&&&&&&&&&&&#/**,%&&&(&&%*&&&&&&&&&&&&&&&&%*  (########\n"
				+ "(/((((#(/*.*########* .&&&&&&&&&&&&&&&&(%&&&&&&%(,...*(%%%%%%%%%# &&&&&&&&&&&&&%%&&%#(#&&&&&&&&%&&&&&&&&&&% %&&&&&%%&&#/&&&&&&&&&&&&&##&&&%/ /########\n"
				+ "*,. .    ...//%#%#%#. (&&&&&&&&&&&&&&%#&&&&&&&,.##%%%%%%%%%%%%%#(.&&&&&&&&&&&&&&%&&&&&&&&&&&&#*%&&&&&&&&&&&&&&&&&(&&&,#&&&&&&&&&(#&&&&&&&&&( /########\n"
				+ "        ....///(##%###(  #&&&&&&&&&#&&&&&&&&&&&( (%%%%%%%%%%%%%%*,&&&&&&&&&&&&&&%&&&&&&&&&&&&#&&&&&%(%&&&&&&&&&&#&&%.&&&&&%(&&&&&&&&&&&&&&&% *########\n"
				+ "         .../////(%%%%#%%* .%&&&(&&&&&&&&&&&&&&&% ,%%%%%%#%%%%%% (&&&&&&&&&&&&&&#&&&&&&&&&&&(&&&&&&&&&%#%(%&&&#%&&*/%((&&&&&&&&&&&&&&&&&&&&% ,########\n"
				+ "        ....///////##%%%%#%%, *&&&&&&&&&&&&&&&&&&&,.#%%# *#..#%(    ..,*(#%&&&&&(&&&&&&&&&&(&&&&&&&&&(&&&&&&&#&&/ #&&&&&&&&&&&&&&&&&&&&&&&&% ,(*,,##%#\n"
				+ "   .  ,(((..*////////#%%%%%%%%%. #&&&&&&&&&&&&&&&&&( * (&&&&&%.                    .,(&&&&(&&&&&&&&#&&&&&&&&&&( ,%*.%&&&&&&&&&&&&&&&&&&&&&&% .*,,,,,(#\n"
				+ "((((..,(((. ///////////%%%%%%%%%%(..%&&&&&&&&&&&&&&&&&&&&&&,#&,                             ./%&&&#&&&&&&&&&%..%%%%%*.%&&&&&&&&&&&&&&&&&&&&% .*,,,,,,,\n"
				+ "((((  .(((. *//##//////#%%%%%%%%%%%%/ ,&&&&&&&&&&&&&&&&&&&&&&&,                                    *%&&&&&% ,%#%%%%%%%/ #&&&&&&&&&&&&&&&&&&%  ,,,,,,,,\n"
				+ "(((*        ///##//#%//#%%%%%%%%%%%%%%%* /&&&&&&&&&&&&&&&&&&&&&&%.                                    ../ *%%%%%%%%%%%#%* .   &&&&&&&&&&&&&%  ,,,,,,,,\n"
				+ "         .. ///////%%//#%%%%%%%%%%%%%%%%%#, (&&&&&&&&&&&&&&&&&&&&&&%.   .                               *%%%%%%%%%%##  /@@@@% ,&@@@@&%&@%%#(  ,,,,,,,,\n"
				+ "*/(/  .###. /*/(///////#%%%%%%%%%%%%%%%%%%%%#. ,#&&&&&&&&&&&#.*%&&/*&&&&&&&&/&&&#*.  .                (#%%**#/*,..  (./@@  /#(.@   .  *@&&&&  ,,,,,,,,\n"
				+ "((((...#(#. */*#%//#(//#%%%%%%%%%%%%%%%%%%%%%%%%%/..*%&&&&/.(&&&*/&&&&&&&&&&&&&&&&&&&#&&&#*       .,,,.....&&&&&&&&.#( ,@@@@/ #( .@*  &@&&&%  ,,,,,,,,\n"
				+ "((((...((*. */*(#//#%/*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*..../&&&&&&&&&&&&&&@(&&&&&&&&(&&&&&&&(&&&.*&&&&&&&&&&&&&&&&% ,%   .*(##%&%%&%%##(%&&&  *,,,,,,,\n"
				+ ",.          */////***,..,*(%%%%%%%%%%%%%%%%%%%%%%%%%%%%%(.,&&&&&&&&&&&&&&&(&&&&&&&&(&&&&&&@(@&&&#  ../&&&&&&&&&&&&&&(&#&/(%&#%&#&%%#/@%%%&(%  (((/,,,,\n"
				+ "    .  *((..,.,...,,,,,,,,///(%%%%%%%%%%%%%%%%%%%%%%%%%%..&&&&&&&&&&&&&&&&%&&&&&&&#&&&&&&&#&&&&&&/ // &&&&&&&&&&&&&&&&&&&&&&&&&&&&&#*  ../#%/#((#(((/*\n"
				+ "(((*.,....,.,.,...,..,,,,,//////(%%%%%%%%%%%%%%%%%%%%%%..&&&&&&&&&&&&&&&&&&&%##((/(%%&&&%%&&&&&&&&..# %&&&&&&&&&&&&&&&&&&&&&%(,. .*(%##%#%##(#(/(((/((\n"
				+ "/#(..,......,.,..,,.,.,,,,*////////#%%%%%%%%%%%%%%%%%%, %&&&&&&&&&&&&&&&&&&&&&&&( .&&&&&&&&&&&&&&&* (.*#%%&&&&&&&&&&&&%/.  ,/#%#%%(##(#/***,,,,,((#/((");
		ArrayList<Command> cmds = new ArrayList<Command>();
		cmds.add(new IceBreathCmd(professor));
		cmds.add(new FireballCmd(professor));
		cmds.add(new SuperSpeedCmd(professor));
		
				
		for (int i = 0; i < currentPlayer.powers.size(); i++)
		{
			if (currentPlayer.powers.get(i).name == "tornado")
				cmds.add(new TornadoCmd(professor));
			
			if (currentPlayer.powers.get(i).name == "scream")
				cmds.add(new SuperSonicScreamCmd(professor));
				
			if (currentPlayer.powers.get(i).name == "invisibility")
				cmds.add(new InvisibilityCmd(professor));
		}
		
		ControlPanel actions = new ControlPanel(cmds);
		ArrayList<Attacks> professorAttacks = professor.returnAttacks();
		
		while(currentPlayer.playerHealth.getHealth() > 0 || professor.villainHealth.getHealth() > 0)
		{
			
			ui.setDisableUI();
			
			ui.print("+ Current Player Health: " + currentPlayer.playerHealth.getHealth());
			
			currentPlayer.showPower();
			
			ui.print("You can activate X where X is a Power");
			
		
			String input = ui.input();
	
			String[] tokens = input.split(" ", 2); 
			
			boolean powerfound = false;
			
			for(int i = 0;i < currentPlayer.powers.size(); i++){
				if (currentPlayer.powers.get(i).name.contains(tokens[1]))
				{
					actions.buttonWasPressed(i);
					powerfound = true;
					break;
				}
			}
			
			if (powerfound == false){
				ui.print("Power not found...");
			}
			
			
			if (professor.villainHealth.getHealth() <= 0)
			{
				winner = "player";
				break;
			}
			
			Random rand = new Random();
			int villainAttack = rand.nextInt(professor.attacks.size());
			
			ui.print(professorAttacks.get(villainAttack).getDes());
			professor.attack(currentPlayer, professorAttacks.get(villainAttack).getDamage());
			
			if (currentPlayer.playerHealth.getHealth() <= 0)
			{
				winner = "other";
				break;
			}
			
		}
		ui.resetDisableUI();
		
		if (winner == "player")
		{
			ui.print("You've defeated the Professor!");
			ui.print("Congratulations :) You've found the Powerpuff Girls");
			ui.print("The Mayor awards you the key to the city");
			ui.print("Thank you for playing our game!");
			System.exit(0);
		}
		else
		{
			ui.print("The Professor proved to be difficult and you have been defeated :()");
			ui.print("Returning to Previous Location...");
			currentPlayer.setLocation(MayorsOffice.getInstance(ui));
		}
		
		
	}

	public static synchronized ProfessorFightSceneLocation getInstance(UI ui){
		if(instance == null){
			instance = new ProfessorFightSceneLocation(ui);
		}
		return instance;
	}
	
	public void setPlayer(Player player)
	{
		currentPlayer = player;
	}
	
	
	
	
	
	
	
	
	
	
	
	
	@Override
	public Location walkNorth() {
		
		return null;
	}
	
	@Override
	public void walkNorthDesc() {
		
	}

	@Override
	public Location walkSouth() {
		return null;

	}

	@Override
	public Location walkWest() {
		return null;

	}

	@Override
	public Location walkEast() {
		return null;

	}

	@Override
	public void walkSouthDesc() {
		
	}

	@Override
	public void walkWestDesc() {
		

	}

	@Override
	public void walkEastDesc() {


	}

	public void lookAround() {
	}
}
